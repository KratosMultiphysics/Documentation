<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KratosMultiphysics: Metis Application</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../kratos_small.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">KratosMultiphysics
   </div>
   <div id="projectbrief">KRATOS Multiphysics (Kratos) is a framework for building parallel, multi-disciplinary simulation software, aiming at modularity, extensibility, and high performance. Kratos is written in C++, and counts with an extensive Python interface.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Metis Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Metis application provides an interface to the <a href="https://github.com/KarypisLab/METIS">METIS</a> graph partitioning library, used within <a class="el" href="../../db/d66/namespace_kratos.html" title="REF: G. R. Cowper, GAUSSIAN QUADRATURE FORMULAS FOR TRIANGLES.">Kratos</a> Multiphysics to generate mesh partitions for MPI runs.</p>
<p>The applicaiton is organized in a series of processes, each one of them providing an interface to a different partitioning algorithm. The algorithm most commonly used for finite elements is <code><a class="el" href="../../d0/d06/metis__divide__heterogeneous__input__process_8h.html">metis_divide_heterogeneous_input_process.h</a></code>, which generates a partition of the mesh based on the nodal graph and can be used for meshes combining multiple element types.</p>
<h1>Build instructions</h1>
<h2>Direct GNU/Linux install</h2>
<p>Building the <code><a class="el" href="../../d1/d7a/namespace_metis_application.html">MetisApplication</a></code> requires <em>METIS</em> libraries and their dependencies already installed on the system. The easiest way to get them is by the package manager of the <em>GNU/Linux</em> distribution. For example, in <em>Ubuntu GNU/Linux</em>:</p>
<div class="fragment"><div class="line">sudo apt install libmetis-dev</div>
</div><!-- fragment --><p>However, there may be situations where downloading the packages may not be possible. In this case, other (potentially trickier) option is to download the source code and build the libraries. For more detailed and updated instructions for compiling <em>METIS</em>, <em>GKlib</em>, and other necessary packages, refer to <a href="https://github.com/KratosMultiphysics/Kratos/wiki/Compiling-Kratos-with-MPI-support">Compiling Kratos with MPI support</a> in the wiki.</p>
<p>Assuming that the dependencies are installed, the following steps are:</p>
<ol type="1">
<li>Add the <code><a class="el" href="../../d1/d7a/namespace_metis_application.html">MetisApplication</a></code> to the list of applications to be compiled in the building script for <a class="el" href="../../db/d66/namespace_kratos.html" title="REF: G. R. Cowper, GAUSSIAN QUADRATURE FORMULAS FOR TRIANGLES.">Kratos</a>, as described in the <a href="https://github.com/KratosMultiphysics/Kratos/blob/master/INSTALL.md#adding-applications">install instructions</a>.</li>
</ol>
<div class="fragment"><div class="line">export KRATOS_APPLICATIONS=</div>
<div class="line">...</div>
<div class="line">add_app ${KRATOS_APP_DIR}/MetisApplication</div>
</div><!-- fragment --><ol type="1">
<li>Tell CMake where are located the libraries and headers of <em>METIS</em>, if CMake does not find them automatically. For example:</li>
</ol>
<div class="fragment"><div class="line">cmake -H&quot;${KRATOS_SOURCE}&quot; -B&quot;${KRATOS_BUILD}&quot; \</div>
<div class="line">...</div>
<div class="line">-DMETIS_ROOT_DIR=&quot;${HOME}/Projects/METIS/build&quot;</div>
</div><!-- fragment --><h2>Spack</h2>
<p><em>Spack</em> is a multi-platform package manager that builds and installs multiple versions and configurations of software. It works on <em>GNU/Linux</em>, <em>macOS</em>, and many supercomputers. <em>Spack</em> is non-destructive: installing a new version of a package does not break existing installations, so many configurations of the same package can coexist.</p>
<p>To install <em>Spack</em> you just need to run the following command:</p>
<div class="fragment"><div class="line">git clone -c feature.manyFiles=true https://github.com/spack/spack.git</div>
</div><!-- fragment --><p>To use it you will need to add the corresponding environment variables (or call <code>spack_location/spack/bin/spack</code>):</p>
<div class="fragment"><div class="line">. spack_location/spack/share/spack/setup-env.sh</div>
</div><!-- fragment --><p>Then in order to install <em>METIS</em>:</p>
<div class="fragment"><div class="line">spack install parmetis</div>
</div><!-- fragment --><p>If you want that the libraries are added automatically to <code>LD_LIBRARY_PATH</code> to run the following commands before loading the modules:</p>
<div class="fragment"><div class="line">spack config add modules:prefix_inspections:lib64:[LD_LIBRARY_PATH]</div>
<div class="line">spack config add modules:prefix_inspections:lib:[LD_LIBRARY_PATH]</div>
</div><!-- fragment --><p>Now you just need to load <em>METIS</em>:</p>
<div class="fragment"><div class="line">spack load parmetis</div>
</div><!-- fragment --><p>Once to compile <code><a class="el" href="../../d1/d7a/namespace_metis_application.html">MetisApplication</a></code> just remember to add the application to the <code>cofigure</code> bash script:</p>
<div class="fragment"><div class="line">export KRATOS_APPLICATIONS=</div>
<div class="line">...</div>
<div class="line">add_app ${KRATOS_APP_DIR}/MetisApplication</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Dec 5 2024 03:39:01 for KratosMultiphysics by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
